<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="assets/img/favicon.png">
    <link rel="canonical" href="https://www.chatter.plus/app">
    <meta name="theme-color" content="#333333" />
    <title>Chatter+</title>
    <!-- Bootstrap CSS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/material-design-iconic-font/2.2.0/css/material-design-iconic-font.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <link rel="stylesheet" href="assets/css/base.css">
    <link rel="stylesheet" href="assets/css/app.css">
    <link rel="stylesheet" href="assets/css/checkanimation.css">
</head>
<style>
    input{
        color:#FFF
    }
    .option-image {
        vertical-align: middle;
        margin-right: 10px; /* Espacio entre la imagen y el texto */
        max-width: 20px; /* Ancho máximo de la imagen */
        max-height: 20px; /* Altura máxima de la imagen */
    }
</style>
<body style="padding: 0px;background-color: #353535;color:#FFF">
    <div class="user user_1 container-fluid m-0" style="display: none ;height: 100vh;overflow-y: auto;padding: 0px 20px;color:#FFF;background: linear-gradient(180deg, rgba(83,83,83,1) 0%, rgba(87,176,137,1) 78%, rgba(90,228,168,1) 100%);">
        <div class="capa capa_0">
        <center style="margin-top: 32vh;">
            <div class="lds-ring"><div></div><div></div><div></div><div></div></div>
        </center>
        </div>
        <div class="capa capa_102 p-0" style="display: none;">
            <div class="col-12 col-lg-4 offset-lg-4" style="padding: 10px;margin-top: 20vh;">
                <div class="col-12 m-0" style="color:#FFF;padding: 0px;border-radius: 10px;text-align: center;">
                    <a class="nav-link" style="font-size:1.9em;margin-top: 0px;font-family: Square;">
                        <b style="color:#e4e4e4">chAtter</b><b style="color: #5AE4A8">+</b></a>
                        <input type="text" disabled id="form_email">
                        <div class="old_pass">
                        <input type="password" placeholder="Current password" id="old_password">
                        </div>
                        <input type="password" placeholder="New password" id="new_password_1">
                        <input type="password" placeholder="Repeat your new password" id="new_password_2" >
                        <p id="new_password_alert" style="color:rgb(237, 150, 150);margin-top: 0px;padding: 0px 10px;"></p>
                        <button class="btn old_pass" style="background-color: #ffffff2c;color:#FFF" onclick="mostrar('user',2);capa(3)"><i class="zmdi zmdi-arrow-left"></i> Cancel</button>  
                        <button class="btn btn-green" onclick="set_password()">Continue</button>                        
                </div>
            </div>
        </div>

        <div class="capa capa_103 p-0" style="display: none;">
            <div class="col-12 col-lg-4 offset-lg-4" style="padding: 10px;margin-top: 20vh;">
                <div class="col-12 m-0" style="color:#FFF;padding: 0px;border-radius: 10px;text-align: center;">
                    <center>
                        <div class="check"></div>
                    </center>
                    <h1 class="animated-text" style="margin-top: 10px;">Your password has been set.</h1>  
                    <button id="btn-animation" class="btn" style="background-color: #FFF;color:#959595;margin-top: 30px;display: none;" onclick="location.href='/?signin=true'">Sign in</button>             
                </div>
            </div>
        </div>

        
        <div class="capa capa_101 p-0 row" style="display: none;">
            <div class="col-12 col-lg-10 offset-lg-1 " style="padding: 10px;margin-top: 0vh;">
                <div class="col-12 m-0" style="color:#FFF;padding: 0px;border-radius: 10px;text-align: center;">
                    <button class="btn btn_back_plan" style="float: left;background-color: #ffffff2c;color:#FFF" onclick="mostrar('user',2);capa(3)"><i class="zmdi zmdi-arrow-left"></i> Go back</button>  
                    <br>  
                    <h3 style="margin-top: 30px;">Please, choose your plan :)</h3>
                        <div class="col-12 p-0">
                            <div class="col-12 p-0">
                                    <div class="carrusel">
                                        <div class="col-lg-10 offset-lg-1 carrusel_div d-flex flex-nowrap" style="text-align: center;">
                                        <div class="card_div col-4">
                                            <div class="card mb-4 shadow p-0">
                                            <div class="card-header">
                                                <h4 class="my-0 font-weight-normal">Free</h4>
                                            </div>
                                            <div class="card-body">
                                                <p style="color: black; position: relative; display: inline-block;margin: 0px;">
                                                    
                                                    <span style="position: absolute; left: 0; top: 50%; width: 100%; height: 1px; background-color: red; transform: translateY(-50%);"></span>
                                                </p>
                                                <h3 class="card-title pricing-card-title">FREE
                                                    <p class="text-muted" style="text-align: center;font-size: .47em;font-weight: 100;margin-bottom: 5px;">Per instance / Per month</p>
                                                </h3>
                                                <ul class="list-unstyled mt-3 mb-4">
                                                    <li class="green-txt" style="color:#d24ede;">-</li>
                                                    <li class="green-txt">3 free & trial intances <a style="background-color: #000;color:#FFF;padding:2px;border-radius: 10px;">?</a></li>
                                                    <li class="green-txt">Unlimited messages</li>
                                                    <li class="green-txt">Webhook notifications</li>
                                                    <li class="red-txt" style="color:#FFCC00">Multimedia download <a style="background-color: #FFcc00;color:#FFF;padding:2px;border-radius: 10px;">?</a></li>
                                                    <li class="red-txt">No email support</li>
                                                    <li class="red-txt" style="color:#333;margin-top: 10px;font-size: .8em;">$3.99<p style="margin-top: -4px;color:#959595">Each extra premium instance</p></li>
                                                    <li class="red-txt" style="color:none;margin-top:20px">-</li>
                                                </ul>
                                                <button type="button" data="1" class="btn btn-lg btn-block btn-outline-primary btn_start">Choose Plan</button>
                                            </div>
                                            </div>
                                        </div>
                                        <div class=" card_div col-4">
                                            <div class="card mb-4 shadow">
                                            <div class="card-header">
                                                <h4 class="my-0 font-weight-normal">Pro</h4>
                                            </div>
                                            <div class="card-body">
                                                <p style="color: black; position: relative; display: inline-block;margin: 0px;">
                                                    $9.99
                                                    <span style="position: absolute; left: 0; top: 50%; width: 100%; height: 1px; background-color: red; transform: translateY(-50%);"></span>
                                                </p>
                                                <h3 class="card-title pricing-card-title">$ 6.99
                                                    <p class="text-muted" style="text-align: center;font-size: .47em;font-weight: 100;margin-bottom: 5px;">Per month</p>
                                                </h3>
                                                <ul class="list-unstyled mt-3 mb-4">
                                                <li class="green-txt" style="color:#d24ede;">3 premium instances. <a style="background-color: #000;color:#FFF;padding:2px;border-radius: 10px;">?</a></li>
                                                <li class="green-txt">3 free & trial intances</li>
                                                <li class="green-txt">Unlimited messages</li>
                                                <li class="green-txt">Webhook notifications</li>
                                                <li class="green-txt">Multimedia download</li>
                                                <li class="green-txt">Email support</li>
                                                <li class="red-txt" style="color:#333;margin-top: 10px;font-size: .8em;">$2.99<p style="margin-top: -4px;color:#959595">Each extra premium instance</p></li>
                                                <li class="sombra_btn" style="border:0px solid #000;border-radius: 3px;width: 75%;margin-left: 12.5%;background: #d25ae4;color:#FFF;margin-top:20px">Get 1 month <b style="color:#FFCC00;font-weight: 700;">FREE</b></li>
                                                </ul>
                                                <button type="button" data="2" class="btn btn-lg btn-block btn-primary  btn_start">Choose Plan</button>
                                            </div>
                                            </div>
                                        </div>
                                        <div class="card_div col-4">
                                            <div class="card mb-4 shadow">
                                            <div class="card-header">
                                                <h4 class="my-0 font-weight-normal">Enterprise</h4>
                                            </div>
                                            <div class="card-body">
                                                <p style="color: black; position: relative; display: inline-block;margin: 0px;">
                                                    $29.99
                                                    <span style="position: absolute; left: 0; top: 50%; width: 100%; height: 1px; background-color: red; transform: translateY(-50%);"></span>
                                                </p>
                                                <h3 class="card-title pricing-card-title">$ 19.99
                                                    <p class="text-muted" style="text-align: center;font-size: .47em;font-weight: 100;margin-bottom: 5px;">Per month</p>
                                                </h3>
                                                <ul class="list-unstyled mt-3 mb-4">
                                                    <li class="green-txt" style="color:#d24ede;">15 premium instances. <a style="background-color: #000;color:#FFF;padding:2px;border-radius: 10px;">?</a></li>
                                                    <li class="green-txt">3 free & trial intances</li>
                                                    <li class="green-txt">Unlimited messages</li>
                                                    <li class="green-txt">Webhook notifications</li>
                                                    <li class="green-txt">Multimedia download</li>
                                                    <li class="green-txt">Email support</li>
                                                    <li class="red-txt" style="color:#333;margin-top: 10px;font-size: .8em;">$1.99<p style="margin-top: -4px;color:#959595">Each extra premium instance</p></li>
                                                    <li class="sombra_btn" style="border:0px solid #000;border-radius: 3px;width: 75%;margin-left: 12.5%;background: #d25ae4;color:#FFF;margin-top:20px">Get 1 month <b style="color:#FFCC00;font-weight: 700;">FREE</b></li>
                                                </ul>
                                                <button type="button"  data="3" class="btn btn-lg btn-block btn-primary btn_start">Choose Plan</button>
                                            </div>
                                            </div>
                                        </div>
                                        </div>
                                      </div>
                                
                            </div>    
                        </div>               
                </div>
            </div>
            
        </div>
    </div>  
  
  <div class="user user_2 container-fluid p-0 m-0" style="display: none ">
    <div class="fixed-top p-0 capa capa_2 capa_3 capa_4 capa_5 capa_6 capa_0 sombra" style="z-index:4;background:#FFF;border: 0px">
        <div class="container-fluid p-0 m-0">
            <div class="row col-12 p-0  m-0 sombra" style="background-color: #333333;">
            <div class="col-8 col-lg-2 offset-lg-0 p-2s" style="padding: 10px 0px 5px 15px;font-family: Logo;letter-spacing: 0.2em;">
                <a class="nav-link" style="font-size:1.9em;margin-top: 0px;font-family: Square;">
                    <b style="color:#e4e4e4">chAtter</b><b style="color: #5AE4A8">+</b></a>
            </div>
            <div class="col-lg-5 offset-lg-2 d-lg-block d-none p-2s " style="padding: 25px 0px;font-family: Logo;letter-spacing: 0.1em;font-weight:600;">
                     
            </div>
            <div class="col-lg-3 offset-lg-0 d-lg-block d-none p-2s " style="padding: 10px 0px;font-family: Logo;letter-spacing: 0.1em;">
                         
            </div>

            <div class="col-4 d-lg-none d-block" style="text-align: right;padding-top: 1px;">
                <img class="menu-toggle" src="https://icons.veryicon.com/png/o/miscellaneous/linear-icon-45/hamburger-menu-5.png" alt="Open Menu icon" style="float:right;width: 40px;margin-top:12px;margin-right: 2px;filter: invert(.8);">
            </div>
            </div>
        </div>
    </div>
    <div class="row m-0 p-0 " >
            <!-- Menu Tablet phone -->
            <nav class="navbar-panel" style="padding: 10px;z-index: 999;background-color: #FFF;">
                <a style="font-size:1.9em;margin-top: 10px;font-family: Square;"><b style="color:#555555">Chatter</b><b style="color: #26D367;">+</b></a>
                <div class="col-12" id="navbar_container" style="padding:10px 0px;">
                    <ul  class="nav nav-pills flex-column mb-auto p-0  " style="margin-top: 10px;">
                    <li class="nav-item p-0" onclick="capa(2)" >
                        <b href="#" class="menu menu_2 ">
                            Instances
                        </b>
                    </li>
                    <li class="p-0" style="" onclick="capa(4)">
                        <b href="#" class="menu menu_4 "  >
                            API Tokens
                        </b>
                    </li>
                    <li onclick="capa(5)" class="p-0"  >
                        <b href="#" class="menu menu_5"  >
                            Documentation
                        </b>
                    </li>
                    <li class="p-0" onclick="capa(3)">
                        <b href="#" class="menu menu_3" >
                            Account Settings
                        </b>
                    </li>
                    <li class="p-0" onclick="capa(6)">
                        <b href="#" class="menu menu_6" >
                            Bills
                        </b>
                    </li>
                    <li class="p-0">
                        <b href="#" class="menu"  onclick="alertFun({text:`Are you sure to close your session?`,btn:`Close session`,functionModal:()=>{localStorage.clear();location.href='index.html'}})"  style="color:red">
                            Close Session
                        </b>
                    </li>
                    </ul>
                    
                </div>
            </nav>
            <!-- Menu BigScreen -->
            <div class="col-2 d-none d-lg-block sombra" style="font-family: Logo;height: 100vh;border:0px solid #f5f5f5;border-width: 0px 0px 0px 0px;padding: 90px 20px 0px 20px;background-color: #3e3e3e;">
                <div id="nav_lat" class="co-12 p-0" style="color:#FFF"></div>
            </div> 
            <!-- Main Container -->
            <div class="col-lg-10 col-md-12 m-0" style="padding: 60px 0px 0px 0px;height: 100vh;overflow-y: auto;">
                <div class="  row  capa capa_0 m-0" style="padding-top: 25vh;">
                    <center><div class="lds-ring"><div></div><div></div><div></div><div></div></div></center>
                </div>
                <div class="  row  capa capa_2 m-0" style="padding: 30px 15px 0px 15px;">
                    <div class="col-lg-10 col-md-10 col-12 offset-lg-1 offset-md-1" style="padding: 0px;">
                        <button class="btn btn-green d-none d-sm-block" id="btn_new_intance" onclick="mostrar('create',2);$('#phoneModal').modal('show');$('.nuevo_wsp').val('')" style="float:right;font-size:.8em">NEW INSTANCE</button>
                        <button class="btn btn-green d-block d-sm-none" id="btn_new_intance_xs" onclick="mostrar('create',2);$('#phoneModal').modal('show');$('.nuevo_wsp').val('')" style="float:right;font-size:.8em">+</button>
                        <button class="btn btn-green" onclick="buscar_phones()" style="float:right;font-size:.8em;margin-right: 3px;"> 
                            <img src="assets/img/refresh.png" style="width: 16px;"> </button>
                        <h2>Instances</h2>
                        <p>Get your API token <a style="color: #5AE4A8;cursor: pointer;" onclick="capa(4)">Here</a> to interact with your API instance.</p>
                        <button id="toggleSidebarBtn" style="display: none;">Toggle Sidebar</button>
                        <div class="col-12 p-0" id="div_phones" style="padding: 10px 0px;">
                        </div>
                    </div>
                </div>
                <div class="  row  capa capa_4 m-0" style="padding: 30px 15px 0px 15px;">
                    <div class="col-lg-10 col-md-10 col-12 offset-lg-1 offset-md-1" style="padding: 0px;">
                        <button class="btn btn-green d-none d-sm-block" id="btn_new_intance" onclick="mostrar('token',2);$('#tokenModal').modal('show');$('.nuevo_token').val('')" style="float:right;font-size:.8em">NEW API TOKEN</button>
                        <button class="btn btn-green d-block d-sm-none" id="btn_new_intance_xs" onclick="mostrar('token',2);$('#tokenModal').modal('show');$('.nuevo_token').val('')" style="float:right;font-size:.8em">+</button>
                        <button class="btn btn-green" onclick="buscar_token(true)" style="float:right;font-size:.8em;margin-right: 3px;"> 
                            <img src="assets/img/refresh.png" style="width: 16px;"> </button>
                        <h2>API Tokens</h2>
                        <p>Create here your API token to interact with your API instance.</p>
                        <button id="toggleSidebarBtn" style="display: none;">Toggle Sidebar</button>
                        <div class="col-12 p-0" id="div_tokens" style="padding: 10px 0px;">
                        </div>
                    </div>
                </div>

                <div class="  row  capa capa_6 m-0" style="padding: 30px 15px 0px 15px;">
                    <div class="col-lg-10 col-md-10 col-12 offset-lg-1 offset-md-1 row" style="padding: 0px;">
                        <div class="col-12 col-md-8 col-lg-7" style="padding: 0px 20px;">
                            <h4>Your Pending Payments <b id="totalAmount" style="color: rgb(255,255,255,.8);"></b></h4> 
                            <div id="charges" class="row" style="padding: 0px 10px"></div>
                            <p class="btn_pay_now" style="margin-top: 10px;text-align: left;font-size: .9em;">Total selected <b id="totalAmountPay" style="color: #5AE4A8;"></b>
                            <button class="btn " style="background:#b03ec3;color:#FFF;width: auto;margin-top: -2px;padding:3px 8px;font-size: .8em;" onclick="$('#payNow').modal('show');mostrar('payDiv',2);">Pay Now</button>
                            </p>
                        </div>
                        <div class="col-12 col-md-4 col-lg-5" style="padding: 0px 20px;">
                            <div class="col-12 p-0">
                                <button class="btn btn-green" style="float: right;padding:0px 0px 7px 2px;" onclick="$('#newCard').modal('show');mostrar('cardAdm',2)"><img src="assets/img/edit.png" style="width: 30px;"></button>
                                <h4>Your Cards</h4>
                                <p><b id="cards_number"></b> Card(s) registered</p> 
                                <hr>
                            </div>
                            <div class="col-12 p-0">
                                <h4>Your Payments</h4> 
                                <div id="payments" class="row" style="max-height: 50vh;overflow-y: auto;padding:0px 10px">
                                </div>
                            </div>
                        </div>  
                        
                        
                    </div>
                </div>
                
                <div class="  row  capa capa_3 m-0 p-0">
                            <div class="col-sm-10  col-xs-12 offset-sm-1" style="padding: 30px 20px;">
                                <div class="col-12" style="padding: 0px;border-radius: 10px;">
                                <h3>Account</h3>
                                <hr>
                                <h5>Plan</h5>
                                Current Plan: 
                                <select name="" id="plan_form_user" disabled>
                                    <option value="1" style="background-color: #333333;">Free</option>
                                    <option value="2" style="background-color: #333333;">Pro</option>
                                    <option value="3" style="background-color: #333333;">Enterprise</option>
                                </select>
                                <button class="btn btn-green" style="background:#4e9bde;color:#FFF" onclick="mostrar('user',1);capa(101);">Change you plan</button>
                                <button class="btn btn-green" onclick="mostrar('user',1);capa(101);">Admin you plan</button>
                                <hr>
                                <h5>Personal data</h5>
                                Name:
                                <input class="inputCapa" id="name_form_user" type="text">
                                Email 
                                <i class="zmdi zmdi-check" style="color: #26D367;display: none;" id="email_valid_form_user_check"></i>
                                <i class="zmdi zmdi-alert-triangle" style="color: #FFCC00;display: none;" id="email_valid_form_user_uncheck"></i>
                                <button class="btn btn-green btn-xs" onclick="sent_email_valid()" id="email_valid_form_user" style="display: none;padding: 2px;font-size: .7em;margin-top: -3px;margin-left: 5px;background-color: #ffcc00;margin-bottom: 5px;">Verify your email now!</button>
                                <input class="inputCapa" disabled id="email_form_user" type="text">
                                <button class="btn btn-green" onclick="sent_edit_user()">Edit user</button>
                                <hr>
                                <h5>Password</h5>
                                <button class="btn btn-green" onclick="open_pass_modal(true)">Change Password</button>
                                
                                </div>
                                
                            </div>
                </div>
                <div class="  row  capa capa_5 m-0 p-0 " style="padding:0px;">
                    <div class="col-lg-12 col-md-12 col-12 offset-md-1 p-0 m-0" style="padding: 0px;">
                        <iframe src="documentation.html?hideLogo=true" frameborder="0" style="width: 100%;height: 88vh;"></iframe>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="modal" id="alertModal" tabindex="-1" tabindex="-1" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header" style="border:0px">
              <h5 class="modal-title">Alert</h5>
            </div>
            <div class="modal-body" id="alertModal_body" style="font-weight:100;">
                
            </div>
            <div class="modal-footer" style="border:0px" id="alertModal_btn_div">
                <button class="btn" id="alertModal_btn" onclick=""></button>
            </div>
          </div>
        </div>
    </div>
    
  

  <!-- Bootstrap JS (optional) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    instancias=[];capa_actual=0;
    function capa(i){
        $(".capa").hide();
        $(".capa_"+i).show()
        capa_actual=i
    }
    function mostrar(capa,i){
        $("."+capa).hide();
        $("."+capa+"_"+i).show();
    }
    

    function ajax(url,json_dat,callback,error=(e)=>{console.log(e)}){
            let token="Bearer"
            if(json_dat?.token){
                 token=`Bearer ${json_dat.token}`
            }
            //console.log("token",token)
            $.ajax({url,type:"POST",headers: {"Content-Type": "application/json","Authorization": token},dataType : 'json',data: JSON.stringify(json_dat),success: function(data, textStatus, jqXHR){callback(data)},error: function( jqXHR, textStatus, errorThrown ) {error();}});
    }

    function capa103animation(){
        $('.check').css('animation', 'start 1s ease both');
        setTimeout(function() {
        $('.animated-text').addClass('typing');
        }, 1000);
        setTimeout(function() {
        $("#btn-animation").show()
        }, 2000);
    }

    
    
    let user;
    $(window).on('load',()=>{
        mostrar('user',1)
        const token=getParameterByName("token")
        if(token){
            user={token}
            const email=getParameterByName("email")
            $("#form_email").val(email)
            open_pass_modal(false)
            var newUrl = window.location.protocol + "//" + window.location.host + window.location.pathname;
            window.history.replaceState({ path: newUrl }, '', newUrl);
            return
        }
        alertFun({text:"An error has occurred",btn:"OK",functionModal:()=>{location.href="index.html"}});
    })


    
    function fecha(fc,seg){
        fc=new Date(fc);
        ms=fc.getMonth()+1;ms<10?ms="0"+ms:true;
        d=fc.getDate();d<10?d="0"+d:true;
        h=fc.getHours();h<10?h="0"+h:true;
        m=fc.getMinutes();m<10?m="0"+m:true;
        s="";if(seg){s=fc.getSeconds();s<10?s="0"+s:true;s=":"+s;}
        return h+":"+m+s+" "+d+"/"+ms+"/"+fc.getFullYear();
    }

    $(".capa").hide()
    mostrar('user',2)
    

    function open_pass_modal(newPass){
        capa(102);mostrar('user',1)
        $("#new_password_1").val("");$("#new_password_2").val("");$("#old_password").val("");
        $("#new_password_alert").html("")
        mostrar('pass',2)
        if(!newPass){
            $(".old_pass").hide()
        }else{
            $(".old_pass").show()
        }

    }

    function set_password(){ 
        problema=""
        if($("#new_password_1").val().length<6){problema+="Passwords must be at least 6 characters.<br>"}
        if($("#new_password_1").val()!=$("#new_password_2").val()){problema+="Passwords must match.<br>"}
        $("#new_password_alert").html(problema);
        if(problema!=""){return;}
        env={};
        env["newPassword"]=$("#new_password_1").val();
        env["token"]=user.token;
        capa(0)
        console.log(env)
        ajax("/login/users/setpassword",env,(d)=>{
            if(d.error){
                txt=analisis_error(d,true);
                $("#new_password_alert").html(txt)
                return true;
            }
            capa(103)
            capa103animation();
        });
    }
    
    
    function getParameterByName(name, url) {
        if (!url) url = window.location.href;
        name = name.replace(/[\[\]]/g, '\\$&');
        var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
            results = regex.exec(url);
        if (!results) return null;
        if (!results[2]) return '';
        return decodeURIComponent(results[2].replace(/\+/g, ' '));
    }

    function alertFun({text,btn,functionModal=()=>{$("#alertModal").modal('hide');}}) {
        $("#alertModal").modal('show')
        $("#alertModal_body").html(text);
        if(btn){
            $("#alertModal_btn_div").show();
            $("#alertModal_btn").html(btn);
            $("#alertModal_btn").on('click',functionModal)
        }else{
            $("#alertModal_btn_div").hide();
        }
    }

    const analisis_error=(d,reverse,fun)=>{
        text="An error has occurred, it may be related to the following reasons:<br>";
        console.log(d)
        if(d?.data?.errors){
            //if(d.data.errors[0]?.msg.indexOf("Invalid token")>=0){localStorage.clear();location.href="index.html";}
            d.data.errors.forEach((a,i)=>{
                text+=`<br>${i+1}) ${a.msg}.`
            })
        }
        if(reverse){return text}
        alertFun({text,btn:"OK",functionModal:()=>{$("#alertModal").modal('hide')}});
        return false;
    }


</script>
</body>
</html>
